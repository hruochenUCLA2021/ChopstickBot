version: 1

# PhoneBot (lower body humanoid) generator config.
# Units: meters, radians, kilograms.
#
# URDF `origin.rpy` convention (ROS/URDF):
#   R = Rz(yaw) * Ry(pitch) * Rx(roll)
# Values stored as [roll, pitch, yaw] about X, Y, Z.
#
# Symmetry:
# - Define LEFT leg only.
# - RIGHT leg is generated by mirroring across YZ-plane: x -> -x.
#
# Leg config style (single style only):
# - base -> hip_pitch uses `hip_pitch_mount` (xyz/rpy)
# - then each stage uses a `*_mount` block:
#     joint_origin_xyz: parent output frame -> joint location (in parent frame)
#     mount_xyz/rpy:    joint frame -> child motor frame (fixed)
# - foot uses:
#     joint_origin_xyz: ankle_roll output -> ankle_roll joint location (in ankle_roll output frame)
#     mount_xyz/rpy:    ankle_roll joint frame -> foot link frame (fixed)

robot:
  name: phonebot

options:
  # MJCF only: if true, add a freejoint to the base so the robot is NOT fixed to world.
  floating_base: true

  # If true, add `*_joint_frame` links/bodies (small inertia) when needed.
  # If false, NEVER create any `*_joint_frame` bodies.
  use_joint_frames: true
  # use_joint_frames: false

  # Per-motor ordering:
  # - true : joint first, then motor body (motor rotates WITH its own joint)
  # - false: motor body fixed first, then joint after motor (motor does NOT rotate with its own joint)
  motor_rotates_with_joint:
    hip_pitch: false
    hip_roll: false
    hip_thigh: false
    hip_calf: true
    ankle_pitch: true
    ankle_roll: true

assets:
  motor_stl: /media/hrc/T7_UBUNTU_ONLY/Codesign_ChopstickBot_all_files/reference/xm430_motor/good_conversion_stl/XL-430_new_coordinate_on_axis.STL
  # STL is in mm, scale to meters:
  motor_mesh_scale: 0.001

components:
  motor:
    # XL430 approximate box: x=28.5mm, y=46.5mm, z=34mm, mass=65g
    size_xyz: [0.0285, 0.0465, 0.034]
    # Motor origin is +12mm in +Y relative to box center => box center (COM) is -12mm in motor frame.
    com_offset_xyz: [0.0, -0.012, 0.0]
    mass_kg: 0.065
    visual_rgba: [0.89804, 0.91765, 0.92941, 1.0]
    collision_rgba: [0.0, 0.8, 0.1, 1.0]

  frame:
    # For joint-frame helper bodies (moving bodies must be > mjMINVAL in MuJoCo).
    mass_kg: 0.001
    size_xyz: [0.01, 0.01, 0.01]

  trunk:
    size_xyz: [0.07, 0.01, 0.15]     # 7cm * 1cm * 15cm (x * y * z)
    mass_kg: 0.30
    visual_rgba: [0.7, 0.7, 0.7, 1.0]

  foot:
    size_xyz: [0.10, 0.06, 0.01]     # 10cm * 6cm * 1cm
    mass_kg: 0.05
    visual_rgba: [0.7, 0.7, 0.7, 1.0]

trunk:
  joint:
    # base -> trunk (yaw joint about +Z)
    origin_xyz: [0.0, 0.0, 0.11]
    origin_rpy: [0.0, 0.0, 0.0]
    axis_xyz: [0.0, 0.0, 1.0]

left_leg:
  # base -> hip_pitch mount (fixed)
  hip_pitch_mount:
    xyz: [-0.05, 0.0, 0.0]
    rpy: [0.0, -1.5707963267948966, 0.0]

  # hip_pitch -> hip_roll
  hip_roll_mount:
    joint_origin_xyz: [0.0, 0.0, 0.04]
    mount_xyz: [0.0, 0.0, 0.0]
    mount_rpy: [0.0, -1.5707963267948966, -1.5707963267948966]

  # hip_roll -> hip_thigh
  hip_thigh_mount:
    joint_origin_xyz: [0.0, -0.06, 0.0]
    mount_xyz: [0.0, 0.0, 0.0]
    mount_rpy: [1.5707963267948966, 0.0, 0.0]

  # hip_thigh -> hip_calf
  hip_calf_mount:
    joint_origin_xyz: [0.0, 0.0, 0.04]
    mount_xyz: [0.0, 0.0, 0.0]
    mount_rpy: [-1.5707963267948966, 0.0, -1.5707963267948966]

  # hip_calf -> ankle_pitch
  ankle_pitch_mount:
    joint_origin_xyz: [0.0, -0.10, 0.0]
    mount_xyz: [0.0, 0.0, 0.0]
    mount_rpy: [0.0, 0.0, 3.141592653589793]

  # ankle_pitch -> ankle_roll
  ankle_roll_mount:
    joint_origin_xyz: [-0.04, 0.0, 0.0]
    mount_xyz: [0.0, 0.0, 0.0]
    mount_rpy: [0.0, 1.5707963267948966, 0.0]

  foot:
    joint_origin_xyz: [0.0, 0.0, 0.0]
    mount_xyz: [0.0, 0.035, 0.04]
    mount_rpy: [1.5707963267948966, -1.5707963267948966, 0.0]

